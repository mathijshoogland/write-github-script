name: PR verify

on: 
    pull_request:
        branches:
            - main

jobs:
  comment:
    runs-on: ubuntu-latest
    steps:
#       - name: Checkout repo
#         uses: actions/checkout@v2
      - name: Check PR name
        id: check-pr-name
        run: |
            if [[ "${{ github.event.pull_request.title }}" =~ ^refs/tags/v[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
                echo ::set-output name=match::true
            fi
      - name: Create comment if PR naming is incorrect.
        uses: actions/github-script@v4
        if: steps.check-pr-name.outputs.match != 'true'
        with:
          github-token: ${{secrets.GITHUB_TOKEN}}
          script: |
            github.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'ðŸ‘‹ Please follow our PR contributing guidelines!'
            })
            
# github.event.head_commit.message
#       - name: Check Tag
#         id: check-tag
#         run: |
#           if [[ ${{ github.event.ref }} =~ ^refs/tags/v[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
#               echo ::set-output name=match::true
#           fi
#       - name: Build
#         if: steps.check-tag.outputs.match == 'true'
#         run: |
#           echo "Tag is a match"

#       - name: Add issue to project board
#         if: contains(github.event.issue.labels.*.name, 'bug')
#         uses: actions/github-script@0.8.0
#         with:
#           github-token: ${{secrets.GITHUB_TOKEN}}
#           script: |
#             github.projects.createCard({
#             column_id: 14021164,
#             content_id: context.payload.issue.id,
#             content_type: "Issue"
#             });
